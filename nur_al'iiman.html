<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="موقع نور الإيمان - مواقيت الصلاة، عداد التسبيح، والعد التنازلي للمناسبات الدينية">
    <link rel="icon" href="nur_al'iiman.png" type="image/png" alt="أيقونة موقع نور الإيمان">
    <title>موقع نور الإيمان</title>
    <style>
        /* التنسيق العام */
        * {
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            margin: 0 auto;
            padding: 0 20px;
            background-color: #fdf5e6;
            color: #333;
            text-align: center;
            max-width: 1200px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* تحسينات للشاشات الكبيرة */
        @media (min-width: 1024px) {
            body {
                font-size: 18px;
            }
            h2 {
                font-size: 32px;
                margin-bottom: 30px;
            }
            #counter {
                font-size: 72px;
            }
            button, .return-button {
                font-size: 20px;
                padding: 12px 24px;
            }
            section {
                padding: 30px;
            }
        }

        /* تحسينات للهواتف */
        @media (max-width: 768px) {
            body {
                padding: 0 10px;
            }
            nav button {
                padding: 8px 12px;
                font-size: 16px;
                min-width: 120px;
            }
            input[type="text"], 
            input[type="number"] {
                width: 100%;
                max-width: 200px;
            }
        }

        header {
            background-color: #006400;
            color: white;
            padding: 20px 0;
            font-size: 28px;
            font-weight: bold;
            animation: slideDown 1s ease;
            width: 100%;
        }

        nav {
            display: flex;
            justify-content: center;
            background-color: #4682b4;
            padding: 12px 0;
            flex-wrap: wrap;
            gap: 10px;
            width: 100%;
        }

        button, .return-button {
            background-color: #f5deb3;
            color: #333;
            border: 2px solid #006400;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            min-width: 160px;
            margin: 5px;
        }

        button:hover, .return-button:hover {
            background-color: #daa520;
            transform: scale(1.05);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);
        }

        section {
            display: none;
            padding: 25px;
            animation: fadeIn 1s ease-in-out;
            width: 100%;
            flex-grow: 1;
        }

        section.active {
            display: block;
        }

        .return-button {
            display: inline-block;
            margin: 25px auto;
            background-color: #006400;
            color: white;
            text-decoration: none;
        }

        h2 {
            color: #006400;
            margin-top: 0;
            font-size: 28px;
        }

        /* جدول مواقيت الصلاة */
        table {
            margin: 25px auto;
            width: 100%;
            max-width: 800px;
            border-collapse: collapse;
            background-color: #fdf5e6;
            animation: fadeIn 1.5s ease;
        }

        table th, table td {
            border: 1px solid #006400;
            padding: 12px;
            text-align: center;
        }

        table th {
            background-color: #006400;
            color: white;
            font-size: 18px;
        }

        table tr:hover {
            background-color: #e8f8e8;
            transition: all 0.2s ease;
        }

        /* عداد التسبيح */
        #counter {
            font-size: 64px;
            color: #daa520;
            margin: 20px 0;
            animation: pulse 2s infinite;
        }

        .button-group {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 25px 0;
            flex-wrap: wrap;
        }

        .input-group {
            margin: 20px 0;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        .goal-section {
            margin-top: 30px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        /* العد التنازلي */
        #ramadanCountdown, #fitrCountdown, #adhaCountdown {
            font-size: 25px;
            color: #006400;
            margin: 20px 0;
            animation: fadeIn 2s ease;
        }

        #ramadan, #fitr, #adha {
            font-size: 25px;
            font-weight: bold;
            color: #006400;
            margin: 15px 0;
        }

        /* الأذكار */
        .azkar-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 25px 0;
            flex-wrap: wrap;
        }

        #azkarContent {
            background-color: #f5deb3;
            padding: 25px;
            border-radius: 10px;
            margin: 25px auto;
            max-width: 800px;
            animation: fadeIn 1s ease;
        }

        /* حقول الإدخال */
        input[type="text"], 
        input[type="number"],
        input[type="checkbox"] {
            padding: 12px;
            border: 2px solid #006400;
            border-radius: 6px;
            font-size: 16px;
            background-color: #f5deb3;
            color: #333;
            transition: all 0.3s ease;
            text-align: center;
            width: 250px;
            max-width: 100%;
        }

        input[type="text"]:focus, 
        input[type="number"]:focus {
            outline: none;
            border-color: #daa520;
            box-shadow: 0 0 8px rgba(218, 165, 32, 0.6);
            transform: scale(1.02);
        }

        input[type="text"]::placeholder {
            color: #999;
            text-align: center;
        }

        label {
            font-size: 18px;
            margin: 5px;
        }

        /* رسالة التحميل */
        .loading {
            display: none;
            font-size: 18px;
            color: #006400;
            margin: 20px 0;
        }

        /* تأثيرات الحركة */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideDown {
            from { transform: translateY(-50px); }
            to { transform: translateY(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <header>
        موقع نور الإيمان
    </header>
    <nav>
        <button onclick="showSection('prayerTimes')">مواقيت الصلاة</button>
        <button onclick="showSection('tasbeehCounter')">عداد التسبيح</button>
        <button onclick="showSection('countdown')">العد التنازلي</button>
        <button onclick="showSection('azkar')">الأذكار</button>
    </nav>

    <section id="prayerTimes" class="active">
        <h2>مواقيت الصلاة</h2>
        <div class="input-group">
            <label for="city">اسم المدينة:</label>
            <input 
                id="city" 
                type="text" 
                placeholder="أدخل اسم المدينة" 
                value="قلقيلية"
                onfocus="this.placeholder=''" 
                onblur="this.placeholder='أدخل اسم المدينة'"
            >
            <button onclick="getPrayerTimes()">عرض المواقيت</button>
        </div>
        <div id="loading" class="loading">جاري تحميل البيانات...</div>
        <table id="prayerTimesTable">
            <thead>
                <tr>
                    <th>الصلاة</th>
                    <th>الوقت</th>
                </tr>
            </thead>
            <tbody id="prayerTimesBody"></tbody>
        </table>
    </section>

    <section id="tasbeehCounter">
        <h2>عداد التسبيح</h2>
        <div class="input-group">
            <label for="usedBefore">هل استخدمت الموقع من قبل؟</label>
            <input type="checkbox" id="usedBefore" onchange="togglePreviousCount()">
        </div>
        <div id="previousCountDiv" style="display: none;">
            <label for="previousCount">أدخل عدد المرات السابقة:</label>
            <input type="number" id="previousCount" value="0" min="0" oninput="validateInput(this)" onchange="setPreviousCount()">
        </div>
        <div id="counter">0</div>
        <div class="button-group">
            <button onclick="decrement()">-</button>
            <button onclick="increment()">+</button>
            <button onclick="resetCounter()">إعادة تعيين</button>
        </div>
        <div class="goal-section">
            <label for="dailyGoal">الهدف اليومي:</label>
            <input 
                type="number" 
                id="dailyGoal" 
                value="100" 
                min="1" 
                onfocus="this.placeholder=''" 
                onblur="this.placeholder='100'"
            >
            <button onclick="setGoal()">تعيين</button>
            <div id="goalProgress">0 / 100</div>
        </div>
    </section>

    <section id="countdown">
        <h2>العد التنازلي للمناسبات الدينية</h2>
        <div id="ramadan">رمضان: <span id="ramadanCountdown"></span></div>
        <div id="fitr">عيد الفطر: <span id="fitrCountdown"></span></div>
        <div id="adha">عيد الأضحى: <span id="adhaCountdown"></span></div>
    </section>

    <section id="azkar">
        <h2>أذكار الصباح والمساء</h2>
        <div class="azkar-buttons">
            <button onclick="showAzkar('morning')">أذكار الصباح</button>
            <button onclick="showAzkar('evening')">أذكار المساء</button>
        </div>
        <div id="azkarContent"></div>
    </section>

    <a href="https://1hiba7.github.io/Hiba-Kittaneh/" class="return-button">العودة إلى الصفحة الرئيسية</a>

    <script>
        // تعريف المتغيرات العامة
        let count = 0;
        let dailyGoal = 100;
        const prayerNames = {
            Fajr: "الفجر",
            Sunrise: "الشروق",
            Sunset: "غروب الشمس",
            Dhuhr: "الظهر",
            Asr: "العصر",
            Maghrib: "المغرب",
            Isha: "العشاء",
            Imsak: "الإمساك",
            Midnight: "منتصف الليل",
            Firstthird: "الثلث الأول",
            Lastthird: "الثلث الأخير"
        };

        // الأذكار
        const azkar = {
            morning: [
                "أَعُوذُ بِاللَّهِ مِنَ الشَّيْطَانِ الرَّجِيمِ",
                "اللَّهُ لَا إِلَهَ إِلَّا هُوَ الْحَيُّ الْقَيُّومُ...",
                "سُبْحَانَ اللَّهِ وَبِحَمْدِهِ"
            ],
            evening: [
                "أَعُوذُ بِاللَّهِ مِنَ الشَّيْطَانِ الرَّجِيمِ",
                "آمَنَ الرَّسُولُ بِمَا أُنْزِلَ إِلَيْهِ مِنْ رَبِّهِ...",
                "سُبْحَانَ اللَّهِ وَالْحَمْدُ لِلَّهِ وَلَا إِلَهَ إِلَّا اللَّهُ وَاللَّهُ أَكْبَرُ"
            ]
        };

        // عند تحميل الصفحة
        document.addEventListener('DOMContentLoaded', () => {
            // تحميل مواقيت الصلاة تلقائيًا
            getPrayerTimes();

            // تحميل عداد التسبيح من التخزين المحلي
            const savedCount = localStorage.getItem('tasbeehCount');
            if (savedCount) {
                count = parseInt(savedCount);
                document.getElementById('counter').textContent = count;
            }

            // تحميل الهدف اليومي
            const savedGoal = localStorage.getItem('dailyGoal');
            if (savedGoal) {
                dailyGoal = parseInt(savedGoal);
                document.getElementById('dailyGoal').value = dailyGoal;
            }

            // تحديث التقدم
            updateProgress();

            // بدء العد التنازلي
            startCountdowns();
        });

        // عرض القسم المحدد
        function showSection(sectionId) {
            const sections = document.querySelectorAll("section");
            sections.forEach(section => {
                section.classList.remove("active");
            });
            document.getElementById(sectionId).classList.add("active");
        }

        // جلب مواقيت الصلاة
        async function getPrayerTimes() {
            const city = document.getElementById("city").value || "قلقيلية";
            const loading = document.getElementById("loading");
            loading.style.display = "block";

            try {
                const apiUrl = `https://api.aladhan.com/v1/timingsByCity?city=${encodeURIComponent(city)}&country=Palestine&method=2`;
                const response = await fetch(apiUrl);
                const data = await response.json();
                const timings = data.data.timings;
                const body = document.getElementById("prayerTimesBody");
                body.innerHTML = "";
                for (const [prayer, time] of Object.entries(timings)) {
                    body.innerHTML += `<tr><td>${prayerNames[prayer] || prayer}</td><td>${time}</td></tr>`;
                }
            } catch (error) {
                alert("حدث خطأ أثناء جلب مواقيت الصلاة. يرجى المحاولة لاحقًا.");
            } finally {
                loading.style.display = "none";
            }
        }

        // العد التنازلي
        function startCountdowns() {
            countdown(new Date('2026-02-18').getTime(), 'ramadanCountdown');
            countdown(new Date('2026-03-20').getTime(), 'fitrCountdown');
            countdown(new Date('2025-06-07').getTime(), 'adhaCountdown');
        }

        function countdown(targetDate, elementId) {
            function updateCountdown() {
                const now = new Date().getTime();
                const diff = targetDate - now;

                if (diff <= 0) {
                    document.getElementById(elementId).innerText = "انتهى العد التنازلي";
                    return;
                }

                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);

                document.getElementById(elementId).innerText = `${days} يوم ${hours} ساعة ${minutes} دقيقة ${seconds} ثانية`;
                setTimeout(updateCountdown, 1000);
            }

            updateCountdown();
        }

        // عداد التسبيح
        function increment() {
            count++;
            document.getElementById('counter').textContent = count;
            localStorage.setItem('tasbeehCount', count);
            updateProgress();
        }

        function decrement() {
            if (count > 0) count--;
            document.getElementById('counter').textContent = count;
            localStorage.setItem('tasbeehCount', count);
            updateProgress();
        }

        function resetCounter() {
            count = 0;
            document.getElementById('counter').textContent = count;
            localStorage.setItem('tasbeehCount', count);
            updateProgress();
        }

        function togglePreviousCount() {
            const div = document.getElementById('previousCountDiv');
            div.style.display = document.getElementById('usedBefore').checked ? 'block' : 'none';
            if (!document.getElementById('usedBefore').checked) {
                resetCounter();
            }
        }

        function setPreviousCount() {
            const previousCount = parseInt(document.getElementById('previousCount').value);
            count = isNaN(previousCount) ? 0 : previousCount;
            document.getElementById('counter').textContent = count;
            localStorage.setItem('tasbeehCount', count);
            updateProgress();
        }

        function validateInput(input) {
            if (input.value < 0) input.value = 0;
        }

        // الهدف اليومي
        function setGoal() {
            dailyGoal = parseInt(document.getElementById('dailyGoal').value);
            localStorage.setItem('dailyGoal', dailyGoal);
            updateProgress();
        }

        function updateProgress() {
            document.getElementById('goalProgress').textContent = `${count} / ${dailyGoal}`;
        }

        // الأذكار
        function showAzkar(time) {
            const azkarContent = document.getElementById('azkarContent');
            azkarContent.innerHTML = azkar[time].map(item => `<p>${item}</p>`).join('');
        }
    </script>
</body>
</html>
